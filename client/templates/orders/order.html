<template name="order">
  {{#contentFor "headerButtonLeft"}}
    {{>ionNavBackButton path="orders" class="button-clear button-light" text=false}}
  {{/contentFor}}

  {{#contentFor "headerTitle"}}
    <h1 class="title normal-title">{{#if order._id}}订单详情{{else}}订单确认{{/if}}</h1>
  {{/contentFor}}

  {{#ionView}}
    {{#ionContent}}
      {{#ionList class="order-detail"}}

        {{#ionItem}}
        <div>
          <div>
            <span class="order-detail-head">
              上课人
            </span>
          </div>
          <div class="order-detail-detail">
            {{order.student.name}} | {{phoneNum}}
          </div>
        </div>
        {{/ionItem}}
        {{#ionItem}}
        <div>
          <div class="order-detail-avatar">
            <span class="order-detail-head">
              课程{{order.className}}
            </span>
            <div class="order-detail-detail">
              {{order.teacher.name}} | {{subject}}
            </div>
          </div>
          <div class="teacher-avatar">
            <img src="{{teacher.profile.avatarUrl}}" class="img-responsive img-circle" >
          </div>
        </div>
        {{/ionItem}}
        {{#ionItem}}
          <label>上课时间</label>
          <div class="item-note">
            {{#each timePhases}}
              <div>{{weekdayText weekday}} {{convMinutes2Str start}} - {{convMinutes2Str end}}</div>
            {{/each}}
          </div>
        {{/ionItem}}
        {{#ionItem}}
          <label>上课地点</label>
          <div class="item-note">学习中心</div>
          <div>上课地点详细信息 (TODO)</div>
        {{/ionItem}}
        {{#ionItem}}
        <div>
          <div>
            <span class="order-detail-head">
              课时
            </span>
          </div>
          <div class="order-detail-detail">
            {{courseCount}}课时
          </div>
        </div>
        {{/ionItem}}
        {{#ionItem}}
        <div>
          <div>
            <span class="order-detail-head">
              课程单价
            </span>
          </div>
          <div class="order-detail-detail">
            ￥{{money order.unitCost}}
          </div>
        </div>
        {{/ionItem}}
        {{#ionItem class="item-icon-right"}}
          <label>麻辣奖学金</label>
          <div class="item-note">
            <a class="btn pull-right" href="{{pathFor 'parentSettingsEdit'}}">{{> ionIcon icon="ios-arrow-forward" class="button-light greyColor"}}</a>
          </div>
        {{/ionItem}}
        {{#ionItem}}
        <div>
          <div>
            <span class="order-detail-head">
              课程总价
            </span>
          </div>
          <div class="order-detail-detail">
            ￥{{money order.cost}}
          </div>
        </div>
        {{/ionItem}}
        {{#ionItem}}
        <div class="teacher-detail-submit">
          {{#if order._id}}
            {{#if $neq order.status "paid"}}
            <div class="button-bar">
              <a class="button" id="btnDelete">取消订单</a>
              <a class="button button-assertive" id="btnSaveAndPay">付款</a>
            </div>
            {{/if}}
          {{else}}
          <div class="buttom-btn-view">
            <div class="row row-center">
              <div class="pull-left col">
                还需支付：￥<span id="toPayCost">{{toPayCost}}</span>
              </div>
              <div class="pull-right col">
                <button id="btnSaveAndPay" class="button button-full button-assertive">
                  前往支付
                </button>
              </div>
            </div>
          </div>
          {{/if}}
        </div>
        {{/ionItem}}

      {{/ionList}}
    {{/ionContent}}
  {{/ionView}}
  {{#if showLoading}}
    {{> loading}}
  {{/if}}
</template>
